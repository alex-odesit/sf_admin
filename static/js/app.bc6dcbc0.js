(function(){"use strict";var e={9951:function(e,s,t){var a=t(9242),r=t(3396);const i={class:"app"},n=(0,r._)("div",{class:"authors"},[(0,r.Uk)(" Authors: "),(0,r._)("span",{class:"authors__item"},"Daniel Kolesnyk"),(0,r.Uk)(", "),(0,r._)("span",{class:"authors__item"},"Alex Dmitriev")],-1);function l(e,s){const t=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(t),n])}var o=t(89);const d={},c=(0,o.Z)(d,[["render",l]]);var u=c,p=t(2483),_=t(7139);const h=e=>((0,r.dD)("data-v-148e4bb1"),e=e(),(0,r.Cn)(),e),m={class:"wrapper"},f={class:"box"},y={class:"input-field col s12"},v={class:"input-field col s12"},w=h((()=>(0,r._)("button",{class:"btn waves-effect waves-light",type:"submit"},[(0,r.Uk)(" sing in "),(0,r._)("i",{class:"material-icons right"},"send")],-1))),g={key:0,class:"progress"},b=h((()=>(0,r._)("div",{class:"indeterminate"},null,-1))),N=[b];function x(e,s,t,i,n,l){return(0,r.wg)(),(0,r.iD)("div",m,[(0,r._)("div",f,[(0,r._)("form",{class:"form",onSubmit:s[2]||(s[2]=(...s)=>e.onSubmit&&e.onSubmit(...s))},[(0,r._)("div",y,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[0]||(s[0]=s=>e.form.email=s),id:"email",type:"email",class:(0,_.C_)(["validate",{invalid:!e.isValid}])},null,2),[[a.nr,e.form.email]]),(0,r._)("label",{class:(0,_.C_)({active:e.form.email}),for:"email"},"Email",2)]),(0,r._)("div",v,[(0,r.wy)((0,r._)("input",{class:(0,_.C_)([{invalid:!e.isValid},"validate"]),"onUpdate:modelValue":s[1]||(s[1]=s=>e.form.password=s),id:"password",type:"password"},null,2),[[a.nr,e.form.password]]),(0,r._)("label",{class:(0,_.C_)({active:e.form.password}),for:"password"},"Password",2)]),w,e.isLoading?((0,r.wg)(),(0,r.iD)("div",g,N)):(0,r.kq)("",!0)],32)])])}t(560);var k=t(7327),P=t(7795),D=t(2689),S=t(7130);class U{constructor(){(0,k.Z)(this,"_app",void 0),(0,k.Z)(this,"_playerId",null),(0,k.Z)(this,"_database",void 0)}initialize(){this._app=(0,P.ZF)(this.getConfig())}async logIn(e,s){const t=(0,D.v0)(this._app),a=await(0,D.e5)(t,e,s).catch((e=>console.error(e)));if(!a)throw"User not found";return this._playerId=a.user.uid,this._database=(0,S.N8)(this._app),a.user.getIdToken()}async post(e,s=""){try{await(0,S.t8)((0,S.iH)(this._database,`users/${this._playerId}/${s}`),JSON.stringify(e))}catch(t){throw console.error(t),"Data not sending"}}async get(e){try{const s=(0,S.iH)(this._database);return JSON.parse((await(0,S.U2)((0,S.iU)(s,`users/${this._playerId}/${e}`))).val())}catch(s){console.error("Data not defined"),console.error(s)}}get app(){return this._app}getConfig(){return{apiKey:"AIzaSyDAJ-2MTGkpqj09qtpdEgQwBXSn4I64k48",authDomain:"secret-friend-5c88b.firebaseapp.com",projectId:"secret-friend-5c88b",storageBucket:"secret-friend-5c88b.appspot.com",messagingSenderId:"544150717608",appId:"1:544150717608:web:48314d368f0fa5bc206e9d",measurementId:"G-PCQ052C8X4"}}}const O=new U;var C=t(65),I=(0,r.aZ)({name:"Auth",data:()=>({form:{email:"",password:""},isLoading:!1,isValid:!0}),methods:{...(0,C.nv)(["setUserToken"]),async onSubmit(e){if(e.preventDefault(),this.isLoading)return;this.isValid=!0,this.isLoading=!0;const s=await O.logIn(this.form.email,this.form.password);s||(this.isValid=!1),s&&(this.$router.push("home"),await this.setUserToken(s)),this.isLoading=!1}}});const T=(0,o.Z)(I,[["render",x],["__scopeId","data-v-148e4bb1"]]);var V=T;const J=e=>((0,r.dD)("data-v-76c0b85d"),e=e(),(0,r.Cn)(),e),L={class:"wrapper"},W={class:"users"},Z=J((()=>(0,r._)("div",{class:"users__labels"},null,-1))),q={class:"user__node user__count"},G={class:"user__remove user__node"},j=["onClick"],z=J((()=>(0,r._)("i",{class:"material-icons red"},"remove_circle_outline ",-1))),E=[z],M={class:"user__name user__node"},A={class:"input-field"},H=["onUpdate:modelValue"],R={class:"user__preferences user__node"},$={class:"input-field"},K=["onUpdate:modelValue"],F={class:"user__unique user__node"},Y={class:"input-field"},B=["onUpdate:modelValue"],Q=["value"],X=J((()=>(0,r._)("label",null,"Exception",-1))),ee=["onClick"],se={key:1,class:"user__password user__node user__password_not-generated"},te={key:2,class:"user__node user__tooltip"},ae=["data-tooltip"],re={class:"user__row"},ie=J((()=>(0,r._)("div",{class:"user__node user__count"},null,-1))),ne=J((()=>(0,r._)("button",{type:"submit",class:"btn-floating btn-small"},[(0,r._)("i",{class:"material-icons green"},"add ")],-1))),le=[ne],oe={class:"user__name user__node"},de={class:"input-field"},ce={class:"user__preferences user__node"},ue={class:"input-field"},pe={class:"user__unique user__node"},_e={class:"input-field"},he=["value"],me=J((()=>(0,r._)("label",null,"Exception",-1))),fe={class:"generate__wrapper"},ye={class:"generate__box"},ve=J((()=>(0,r._)("span",{class:"btn__wave"},null,-1))),we=J((()=>(0,r._)("span",{class:"btn__text"},"generate",-1))),ge=[ve,we],be=J((()=>(0,r._)("span",{class:"btn__wave"},null,-1))),Ne=J((()=>(0,r._)("span",{class:"btn__text"},"reset",-1))),xe=[be,Ne],ke={key:1,class:"progress"},Pe=J((()=>(0,r._)("div",{class:"indeterminate"},null,-1))),De=[Pe];function Se(e,s,t,i,n,l){const o=(0,r.up)("Preloader");return(0,r.wg)(),(0,r.iD)("div",L,[e.isLoadData?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(o,{key:0})),(0,r._)("div",W,[Z,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.players,((s,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"user__item user__row"},[(0,r._)("div",q,(0,_.zw)(t+1),1),(0,r._)("div",G,[(0,r._)("a",{onClick:s=>e.removePlayer(t),class:"btn-floating btn-small waves-effect waves-light green"},E,8,j)]),(0,r._)("div",M,[(0,r._)("div",A,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e=>s.fullName=e,id:"first_name",type:"text",class:"validate white-text"},null,8,H),[[a.nr,s.fullName]]),(0,r._)("label",{class:(0,_.C_)(["green-text",{active:s.fullName}]),for:"first_name"},"First Name",2)])]),(0,r._)("div",R,[(0,r._)("div",$,[(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e=>s.givesWish=e,id:"textarea1",class:"materialize-textarea white-text"},null,8,K),[[a.nr,s.givesWish]]),(0,r._)("label",{class:(0,_.C_)(["green-text",{active:s.givesWish}]),for:"textarea1"},"Wish",2)])]),(0,r._)("div",F,[(0,r._)("div",Y,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":e=>s.exceptionNames=e,multiple:""},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getUsersName.filter((e=>s.fullName!==e)),(e=>((0,r.wg)(),(0,r.iD)("option",{key:e,value:e},(0,_.zw)(e),9,Q)))),128))],8,B),[[a.bM,s.exceptionNames]]),X])]),s.password?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:t=>e.copy(s.password),class:"user__password user__node tooltipped","data-position":"bottom","data-tooltip":"COPY"},(0,_.zw)(s.password),9,ee)):(0,r.kq)("",!0),s.password?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",se," not generated ")),s.targetPlayerName?((0,r.wg)(),(0,r.iD)("div",te,[(0,r._)("i",{class:"material-icons tooltipped","data-position":"left","data-tooltip":s.targetPlayerName},"remove_red_eye",8,ae)])):(0,r.kq)("",!0)])))),128)),(0,r._)("form",{class:"form",onSubmit:s[3]||(s[3]=(...s)=>e.addNewUser&&e.addNewUser(...s))},[(0,r._)("div",re,[ie,(0,r._)("div",{class:(0,_.C_)([{opacity0:!e.newPlayer.fullName||!e.newPlayer.givesWish},"user__remove user__node"])},le,2),(0,r._)("div",oe,[(0,r._)("div",de,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":s[0]||(s[0]=s=>e.newPlayer.fullName=s),id:"new_name",type:"text",class:"validate white-text"},null,512),[[a.nr,e.newPlayer.fullName]]),(0,r._)("label",{class:(0,_.C_)(["green-text",{active:e.newPlayer.fullName}]),for:"new_name"},"First Name",2)])]),(0,r._)("div",ce,[(0,r._)("div",ue,[(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":s[1]||(s[1]=s=>e.newPlayer.givesWish=s),id:"new_wish",class:"materialize-textarea white-text"},null,512),[[a.nr,e.newPlayer.givesWish]]),(0,r._)("label",{class:(0,_.C_)(["green-text",{active:e.newPlayer.givesWish}]),for:"new_wish"},"Textarea",2)])]),(0,r._)("div",pe,[(0,r._)("div",_e,[(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":s[2]||(s[2]=s=>e.newPlayer.exceptionNames=s),multiple:""},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getUsersName,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e,value:e},(0,_.zw)(e),9,he)))),128))],512),[[a.bM,e.newPlayer.exceptionNames]]),me])])])],32),(0,r._)("div",fe,[(0,r._)("div",ye,[(0,r._)("button",{class:"btn__wave_box",onClick:s[4]||(s[4]=(...s)=>e.generate&&e.generate(...s))},ge),e.isNeedReset?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn__wave_box btn__wave_box-reset",onClick:s[5]||(s[5]=(...s)=>e.reset&&e.reset(...s))},xe)):(0,r.kq)("",!0),e.isGenerate?((0,r.wg)(),(0,r.iD)("div",ke,De)):(0,r.kq)("",!0)])])])])}var Ue=t(5797),Oe=t.n(Ue),Ce=t(3301),Ie=t.n(Ce);const Te=new(Ie())({length:6}),Ve=(e,s)=>{let t;do{if(t=e[Math.floor(Math.random()*e.length)],e.length===s.length)throw new Error("The player has no target players")}while(s.includes(t.fullName));return t};class Je{constructor(...e){(0,k.Z)(this,"_players",void 0),this._players=e.map((e=>(e.password||=Te.randomUUID().toLowerCase(),e.exceptionNames??=[],e)))}addPlayer(e){return e.password??=Te.randomUUID().toLowerCase(),e.exceptionNames??=[],this._players.push(e)}dropPlayer(e){const s=this._players.findIndex((s=>s.fullName===e));this._players.splice(s,1)}addException(e,s){const t=this._players.find((s=>s.fullName===e));t?.exceptionNames.push(s)}dropException(e,s){const t=this._players.find((s=>s.fullName===e)),a=t?.exceptionNames.indexOf(s);!t||void 0===a||a<0||t.exceptionNames.splice(a,1)}getGameResult(){try{const e=[],s=[];this._players.sort(((e,s)=>s.exceptionNames.length-e.exceptionNames.length));for(let t=0;t<this._players.length;t++){const a=this._players[t],r=Ve(this._players,[a.fullName,...s,...a.exceptionNames].filter(((e,s,t)=>t.indexOf(e)===s)));s.push(r.fullName),a.targetPlayerName=r.fullName,a.targetWish=r.givesWish,e.push(a)}return e}catch(e){return this.getGameResult()}}get players(){return this._players}}class Le{static setLocalStorage(e,s){try{localStorage.setItem(e,JSON.stringify(s))}catch(t){console.error(t)}}static getLocalStorage(e){const s=localStorage.getItem(e);return!!s&&JSON.parse(s)}}const We=e=>((0,r.dD)("data-v-a574b278"),e=e(),(0,r.Cn)(),e),Ze={class:"wrapper__loader"},qe=We((()=>(0,r._)("div",{id:"centerdiv"},[(0,r._)("ul",null,[(0,r._)("li"),(0,r._)("li"),(0,r._)("li"),(0,r._)("li"),(0,r._)("li"),(0,r._)("li")])],-1))),Ge=[qe];function je(e,s,t,a,i,n){return(0,r.wg)(),(0,r.iD)("div",Ze,Ge)}var ze=(0,r.aZ)({name:"Preloader"});const Ee=(0,o.Z)(ze,[["render",je],["__scopeId","data-v-a574b278"]]);var Me=Ee,Ae=(0,r.aZ)({name:"Home",components:{Preloader:Me},data:()=>({isGenerate:!1,players:[],serverPlayers:[],isLoadData:!1,newPlayer:{fullName:"",givesWish:"",exceptionNames:[],password:"",targetWish:"",id:0,targetPlayerName:""}}),watch:{players:{handler(){Le.setLocalStorage("players",this.players)},deep:!0}},methods:{addNewUser(e){e.preventDefault(),this.newPlayer.id=this.players.length?this.players[this.players.length-1].id+1:0,this.players.push(JSON.parse(JSON.stringify(this.newPlayer))),this.resetNewPlayer(),this.updateView()},resetNewPlayer(){this.newPlayer.fullName="",this.newPlayer.givesWish="",this.newPlayer.exceptionNames=[]},removePlayer(e){this.players.splice(e,1),this.updateView()},async generate(){if(this.isGenerate||!this.isNeedReset)return;this.isGenerate=!0;const e=new Je(...JSON.parse(JSON.stringify(this.players)));this.players=e.getGameResult().sort(((e,s)=>e.id-s.id)),await O.post(this.players,"players/"),this.isGenerate=!1,this.serverPlayers=JSON.parse(JSON.stringify(this.players)),this.updateView()},reset(){this.players=JSON.parse(JSON.stringify(this.serverPlayers)),this.updateView()},updateView(){setTimeout(Oe().AutoInit,0)},async copy(e){await navigator.clipboard.writeText(e),this.showToast("Coped",{displayLength:500,inDuration:150,outDuration:150})},showToast(e,s){Oe().toast({html:e,...s,classes:"rounded red"})},async loadData(){const e=await O.get("players");e&&(this.serverPlayers=JSON.parse(JSON.stringify(e)));const s=Le.getLocalStorage("players");s&&(this.players=JSON.parse(JSON.stringify(s))),e&&!s&&(this.players=JSON.parse(JSON.stringify(s))),this.updateView(),this.isLoadData=!0}},computed:{...(0,C.Se)(["getUserToken"]),getUsersName(){return this.players.map((e=>e.fullName))},isNeedReset(){return JSON.stringify(this.players)!==JSON.stringify(this.serverPlayers)}},mounted(){this.getUserToken?this.loadData():this.$router.push("/")}});const He=(0,o.Z)(Ae,[["render",Se],["__scopeId","data-v-76c0b85d"]]);var Re=He;const $e=[{path:"/",name:"auth",component:V},{path:"/home",name:"home",component:Re}],Ke=(0,p.p7)({history:(0,p.r5)(),routes:$e});var Fe=Ke;Symbol();var Ye=(0,C.MT)({state:{userToken:""},getters:{getUserToken(e){return e.userToken}},mutations:{setUserToken(e,s){e.userToken=s}},actions:{setUserToken({commit:e},s){e("setUserToken",s)}},modules:{}});t(5778);O.initialize(),(0,a.ri)(u).use(Ye).use(Fe).mount("#app")}},s={};function t(a){var r=s[a];if(void 0!==r)return r.exports;var i=s[a]={exports:{}};return e[a].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(s,a,r,i){if(!a){var n=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],i=e[c][2];for(var l=!0,o=0;o<a.length;o++)(!1&i||n>=i)&&Object.keys(t.O).every((function(e){return t.O[e](a[o])}))?a.splice(o--,1):(l=!1,i<n&&(n=i));if(l){e.splice(c--,1);var d=r();void 0!==d&&(s=d)}}return s}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,r,i]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,a){var r,i,n=a[0],l=a[1],o=a[2],d=0;if(n.some((function(s){return 0!==e[s]}))){for(r in l)t.o(l,r)&&(t.m[r]=l[r]);if(o)var c=o(t)}for(s&&s(a);d<n.length;d++)i=n[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(c)},a=self["webpackChunksecret_friend_admin"]=self["webpackChunksecret_friend_admin"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(9951)}));a=t.O(a)})();
//# sourceMappingURL=app.bc6dcbc0.js.map